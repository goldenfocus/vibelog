#!/bin/bash

# Golden Focus Document Unlock Helper
#
# Unlocks TODO.md or CURRENT_STATE.md after editing
#
# Usage:
#   ./scripts/unlock-doc TODO goldenfocus-claude-001
#   ./scripts/unlock-doc CURRENT_STATE goldenfocus-claude-001

DOC_NAME=$1
SESSION_NAME=$2

if [ -z "$DOC_NAME" ] || [ -z "$SESSION_NAME" ]; then
  echo "‚ùå Error: Missing arguments"
  echo "Usage: ./scripts/unlock-doc TODO goldenfocus-claude-001"
  exit 1
fi

LOCK_FILE="coordination/active/${SESSION_NAME}-editing-${DOC_NAME}.lock"

if [ ! -f "$LOCK_FILE" ]; then
  echo "‚ö†Ô∏è  Warning: Lock file not found: $LOCK_FILE"
  echo "Already unlocked or never locked."
  exit 0
fi

rm "$LOCK_FILE"
echo "üîì Unlocked ${DOC_NAME}.md (session: $SESSION_NAME)"
